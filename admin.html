<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QCS Admin Panel</title>
    <style>
        body {
            font-family: Arial,
            sans-serif;
            padding: 20px;
            background-color: #f4f4f4;
        }

        .admin-container {
            max-width: 900px;
            margin: auto;
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .hidden {
            display: none;
        }

        input,
        button,
        textarea,
        select {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            box-sizing: border-box;
        }

        img.banner {
            max-width: 100%;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .logout-btn {
            margin-top: 20px;
        }

        section {
            margin-bottom: 20px;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
        }

        label {
            display: block;
            margin-top: 10px;
            font-weight: bold;
        }

        #event-list {
            list-style: none;
            padding: 0;
        }

        #event-list li {
            margin-bottom: 5px;
            padding: 8px;
            background-color: #f9f9f9;
            border-radius: 4px;
        }

        .event-actions {
            display: inline-block;
            margin-left: 10px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
    </style>
</head>

<body>

    <div id="header-container"></div>

    <div class="admin-container">
        <img class="banner" src="https://i.imgur.com/yP7hK0j.png" alt="Admin Panel Banner">

        <div id="login-section">
            <h2>Admin Login</h2>
            <form id="login-form">
                <!-- Use more descriptive IDs and labels -->
                <label for="admin-username">Username:</label>
                <input type="text" id="admin-username" placeholder="Username">
                <label for="admin-password">Password:</label>
                <input type="password" id="admin-password" placeholder="Password">
                <button type="button" id="login-btn">Login</button> <!-- Use the ID from script.js -->
                <p id="login-status"></p> <!-- For displaying login status messages -->
            </form>
        </div>

        <!-- Everything else remains the same -->
        <div id="admin-panel" class="hidden">
            <h2>Welcome, Admin</h2>

            <section>
                <h3>Update Countdown Timer</h3>
                <div class="form-group">
                    <label for="target-time">Target Time:</label>
                    <input type="datetime-local" id="target-time">
                </div>
                <div class="form-group">
                    <label for="entry-link">Entry Link (Optional):</label>
                    <input type="text" id="entry-link" placeholder="Entry link (optional)">
                </div>
                <button type="button" onclick="updateCountdown()">Update Countdown</button>
            </section>

            <section>
                <h3>Manage Events</h3>
                <div class="form-group">
                    <label for="event-title">Event Title:</label>
                    <input type="text" id="event-title" placeholder="Event Title">
                </div>
                <div class="form-group">
                    <label for="event-description">Event Description (optional):</label>
                    <textarea id="event-description" placeholder="Event Description (optional)"></textarea>
                </div>
                <div class="form-group">
                    <label for="event-total-winnings">Total Winnings:</label>
                    <input type="number" id="event-total-winnings" placeholder="Total Winnings" value="0">
                </div>
                <div class="form-group">
                    <label for="event-winner-payout">Winner Payout:</label>
                    <input type="number" id="event-winner-payout" placeholder="Winner Payout" value="0">
                </div>
                <div class="form-group">
                    <label for="event-non-profit">Non-Profit:</label>
                    <input type="text" id="event-non-profit" placeholder="Non-Profit" value="N/A">
                </div>
                <div class="form-group">
                    <label for="event-website-funds">Website Funds:</label>
                    <input type="number" id="event-website-funds" placeholder="Website Funds" value="0">
                </div>
                <button type="button" onclick="addEvent()">Add Event</button>
                <ul id="event-list"></ul>
            </section>

            <section>
                <h3>Manage Users</h3>
                <div class="form-group">
                    <label for="new-username">New Username:</label>
                    <input type="text" id="new-username" placeholder="New Username">
                </div>
                <div class="form-group">
                    <label for="new-password">New Password:</label>
                    <input type="password" id="new-password" placeholder="New Password">
                </div>
                <button type="button" onclick="addUser()">Add User</button>
                <ul id="user-list"></ul>
            </section>

            <section>
                <h3>Manage Sweepstakes</h3>
                <div class="form-group">
                    <label for="sweepstakes-title">Sweepstakes Title:</label>
                    <input type="text" id="sweepstakes-title" placeholder="Sweepstakes Title">
                </div>
                <div class="form-group">
                    <label for="sweepstakes-description">Sweepstakes Description:</label>
                    <textarea id="sweepstakes-description" placeholder="Sweepstakes Description"></textarea>
                </div>
                <div class="form-group">
                    <label for="sweepstakes-start">Start Date:</label>
                    <input type="datetime-local" id="sweepstakes-start">
                </div>
                <div class="form-group">
                    <label for="sweepstakes-end">End Date:</label>
                    <input type="datetime-local" id="sweepstakes-end">
                </div>
                <div class="form-group">
                    <label for="sweepstakes-winners">Number of Winners:</label>
                    <input type="number" id="sweepstakes-winners" placeholder="Number of Winners">
                </div>
                <button type="button" onclick="addSweepstakes()">Add Sweepstakes</button>
                <ul id="sweepstakes-list"></ul>
            </section>

            <section>
                <h3>Send Announcement</h3>
                <div class="form-group">
                    <label for="announcement-title">Announcement Title:</label>
                    <input type="text" id="announcement-title" placeholder="Announcement Title">
                </div>
                <div class="form-group">
                    <label for="announcement-message">Announcement Message:</label>
                    <textarea id="announcement-message" placeholder="Announcement Message"></textarea>
                </div>
                <button type="button" onclick="sendAnnouncement()">Send Announcement</button>
            </section>

            <button class="logout-btn" type="button" onclick="logout()">Logout</button> <!-- Changed type to "button" -->
        </div>
    </div>

    <div id="footer-container"></div>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js"></script>

    <!-- Link to script.js -->
    <script src="script.js" type="module"></script> <!-- IMPORTANT: Added type="module" -->

    <script>
        // Load header/footer
        async function loadHTML(selector, url) {
            try {
                const res = await fetch(url);
                if (res.ok) {
                    const html = await res.text();
                    document.querySelector(selector).innerHTML = html;
                }
            } catch (e) {
                console.error("Failed to load:", url);
            }
        }
        // Load the header and footer
        loadHTML("#header-container", "header-admin.html");
        loadHTML("#footer-container", "footer.html");
    </script>

</body>

</html>
