<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QCS Admin</title>
  <link rel="stylesheet" href="/styles.css">
  <script defer src="/admin.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
  <script defer src="/firebase-config.js"></script>
</head>
<body>  <div id="header"></div>  <main>
    <h1>QCS Admin</h1>
    <a href="/index.html">Back to Homepage</a><div id="login-section">
  <h2>Admin Login</h2>
  <input type="email" id="email" placeholder="Email">
  <input type="password" id="password" placeholder="Password">
  <button onclick="login()">Login</button>
</div>

<div id="admin-panel" style="display:none;">
  <div style="text-align:right; margin-bottom:1em;">
    <button onclick="logout()">Logout</button>
  </div>
  <h2>Welcome Admin</h2>
  <!-- Admin features go here -->
</div>

  </main>  <div id="footer"></div>  <script>
    firebase.auth().onAuthStateChanged(user => {
      if (user) {
        const userId = user.uid;
        firebase.database().ref('/admins/' + userId).once('value').then(snapshot => {
          if (snapshot.exists()) {
            document.getElementById('login-section').style.display = 'none';
            document.getElementById('admin-panel').style.display = 'block';
          } else {
            firebase.auth().signOut();
          }
        });
      }
    });

    function login() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      firebase.auth().signInWithEmailAndPassword(email, password)
        .then(userCredential => {
          const userId = userCredential.user.uid;
          firebase.database().ref('/admins/' + userId).once('value').then(snapshot => {
            if (snapshot.exists()) {
              document.getElementById('login-section').style.display = 'none';
              document.getElementById('admin-panel').style.display = 'block';
            } else {
              firebase.auth().signOut();
              alert('Not an admin');
            }
          });
        })
        .catch(error => {
          alert('Login failed: ' + error.message);
        });
    }

    function logout() {
      firebase.auth().signOut().then(() => {
        document.getElementById('login-section').style.display = 'block';
        document.getElementById('admin-panel').style.display = 'none';
      });
    }

    // Load header and footer
    fetch('/header-admin.html')
      .then(res => res.text())
      .then(data => document.getElementById('header').innerHTML = data);

    fetch('/footer.html')
      .then(res => res.text())
      .then(data => document.getElementById('footer').innerHTML = data);
  </script></body>
</html>